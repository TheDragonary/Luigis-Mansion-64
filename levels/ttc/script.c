#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/ttc/header.h"
#include "level_misc_macros.h"
#include "macro_preset_names.h"
static const MacroObject local_macro_objects_ttc_1[] = {
MACRO_OBJECT_WITH_BEH_PARAM(macro_goomba,16,64722,3854,64475,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,32,64333,1847,63795,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_1up,16,2235,7051,2235,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_coin_line_vertical,0,1748,63457,65110,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_floor_switch_hidden_objects,32,65139,3318,1873,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_box,0,853,2956,965,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,16,64186,748,64328,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,16,64846,901,64626,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pendulum,16,64147,62506,64508,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pendulum,16,937,61749,64495,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pendulum,64,614,4507,186,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pendulum,0,963,4097,608,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pendulum,64,1306,3939,982,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,0,64396,61796,63916,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,64,174,1248,2040,3),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_large_treadmill,16,416,63686,63937,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_wing_cap,16,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_hexagon,0,331,3265,1836,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_hexagon,64,65204,3265,1836,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,64,65366,1248,2040,3),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,64,65021,1248,2040,3),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,16,64193,64111,64176,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_bullet_bill_cannon,64,65021,62946,2240,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_goomba,64,64304,3071,1390,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_goomba,64,64364,1067,64621,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_elevator_platform,16,64341,62443,1532,3),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,16,1885,4130,550,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,0,64476,6280,64786,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_cube,16,64489,64283,64602,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_goomba,112,539,3854,64384,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_circling_amp,112,1038,137,64467,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_clock_hand,16,0,6011,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_goomba_triplet_spawner,0,790,63049,978,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_elevator_platform,16,64141,62044,1332,3),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_spinner,48,64644,4266,907,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,16,180,60586,1870,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_circling_amp,112,65532,4631,65531,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_box,0,1121,3313,290,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_box,0,1121,3313,90,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,16,64144,63463,64663,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,64534,2141,64828,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,1098,62531,1648,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,64357,308,930,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,944,61848,64499,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,2350,5309,2350,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,64220,63113,64211,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,63629,65534,64679,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_red_coin,0,1613,62531,1110,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pit_block,16,64496,126,65502,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_star_trigger,112,63666,1850,65486,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pit_block,112,64496,65465,65502,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_circling_amp,0,64556,64836,1450,1),
MACRO_OBJECT_WITH_BEH_PARAM(macro_blue_coin_switch,16,1050,65517,1000,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,850,65528,1800,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,1600,65528,1050,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,1100,65528,1550,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,1000,65528,450,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,1850,65528,800,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,500,65528,950,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,0,255,65517,1634,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_bullet_bill_cannon,0,65366,64211,63296,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pit_block,16,999,5353,64727,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_bobomb,0,620,60386,1540,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_large_treadmill,16,415,63402,64537,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,0,32767,32767,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,16,32767,28333,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_elevator_platform,112,64012,64082,1129,2),
MACRO_OBJECT_WITH_BEH_PARAM(macro_circling_amp,0,64836,63186,64836,1),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_three_coins,0,1885,4150,550,15),
MACRO_OBJECT_WITH_BEH_PARAM(macro_goomba_triplet_spawner,0,1889,6289,1881,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,0,65156,61216,65134,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_bobomb,0,1077,60714,638,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_bobomb,0,1683,60714,189,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,1350,65528,1300,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,48,64273,1229,1709,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_yellow_coin_2,16,32767,28333,32767,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_hidden_blue_coin,0,750,65528,700,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_three_coins,16,64396,61816,63916,15),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pit_block,16,64641,65465,65356,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_clock_hand,16,0,63049,0,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_coin_line_horizontal,48,64781,65517,64935,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_ten_coins,0,180,60606,1870,15),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,0,1597,65522,44,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_goomba,16,64096,64548,64431,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_ten_coins,0,63666,1870,65486,15),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_pit_block,16,852,5353,64582,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_push_block,16,64000,63463,64807,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_box_ten_coins,16,64476,6300,64786,15),
MACRO_OBJECT_WITH_BEH_PARAM(macro_ttc_rotating_triangle,64,65156,61410,65135,0),
MACRO_OBJECT_WITH_BEH_PARAM(macro_heave_ho,0,65506,65517,63858,0),
MACRO_OBJECT_END(),
};

static const LevelScript script_func_local_1[] = {
    OBJECT(/*model*/ MODEL_NONE,   /*pos*/ -1080,  -840,  1573, /*angle*/ 0,   0, 0, /*behParam*/ 0x00560000, /*beh*/ bhvPoleGrabbing),
    OBJECT(/*model*/ MODEL_THWOMP, /*pos*/  1919,  6191,  1919, /*angle*/ 0, 225, 0, /*behParam*/ 0x00000000, /*beh*/ bhvThwomp2),
    RETURN(),
};

static const LevelScript script_func_local_2[] = {
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/ -1450, -1130, -1050, /*angle*/ 0,   0, 0, /*behParam*/ 0x00000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/ -1850,   300,  -950, /*angle*/ 0,   0, 0, /*behParam*/ 0x01000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/ -1300, -2250, -1300, /*angle*/ 0,   0, 0, /*behParam*/ 0x02000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/  2200,  7300,  2210, /*angle*/ 0,   0, 0, /*behParam*/ 0x03000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_STAR,   /*pos*/ -1050,  2400,  -790, /*angle*/ 0,   0, 0, /*behParam*/ 0x04000000, /*beh*/ bhvStar,                 /*acts*/ ALL_ACTS),
    OBJECT_WITH_ACTS(/*model*/ MODEL_NONE,   /*pos*/  1815, -3200,   800, /*angle*/ 0,   0, 0, /*behParam*/ 0x05000000, /*beh*/ bhvHiddenRedCoinStar, /*acts*/ ALL_ACTS),
    RETURN(),
};

const LevelScript level_ttc_entry[] = {
    INIT_LEVEL(),
    LOAD_MIO0(        /*seg*/ 0x07, _ttc_segment_7SegmentRomStart, _ttc_segment_7SegmentRomEnd),
    LOAD_MIO0_TEXTURE(/*seg*/ 0x09, _machine_mio0SegmentRomStart, _machine_mio0SegmentRomEnd),
    LOAD_MIO0(        /*seg*/ 0x05, _group1_mio0SegmentRomStart, _group1_mio0SegmentRomEnd),
    LOAD_RAW(         /*seg*/ 0x0C, _group1_geoSegmentRomStart,  _group1_geoSegmentRomEnd),
    LOAD_MIO0(        /*seg*/ 0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd),
    LOAD_RAW(         /*seg*/ 0x0F, _common0_geoSegmentRomStart,  _common0_geoSegmentRomEnd),
    ALLOC_LEVEL_POOL(),
    MARIO(/*model*/ MODEL_MARIO, /*behParam*/ 0x00000001, /*beh*/ bhvMario),
    JUMP_LINK(script_func_global_1),
    JUMP_LINK(script_func_global_2),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ROTATING_CUBE,     ttc_geo_000240),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ROTATING_PRISM,    ttc_geo_000258),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_PENDULUM,          ttc_geo_000270),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_LARGE_TREADMILL,   ttc_geo_000288),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_SMALL_TREADMILL,   ttc_geo_0002A8),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_PUSH_BLOCK,        ttc_geo_0002C8),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ROTATING_HEXAGON,  ttc_geo_0002E0),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ROTATING_TRIANGLE, ttc_geo_0002F8),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_PIT_BLOCK,         ttc_geo_000310),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_PIT_BLOCK_UNUSED,  ttc_geo_000328),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_ELEVATOR_PLATFORM, ttc_geo_000340),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_CLOCK_HAND,        ttc_geo_000358),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_SPINNER,           ttc_geo_000370),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_SMALL_GEAR,        ttc_geo_000388),
    LOAD_MODEL_FROM_GEO(MODEL_TTC_LARGE_GEAR,        ttc_geo_0003A0),

    AREA(/*index*/ 1, ttc_geo_0003B8),
MACRO_OBJECTS(local_macro_objects_ttc_1),
WARP_NODE(241,6,2,103,0),
WARP_NODE(240,6,2,53,0),
WARP_NODE(10,14,1,10,0),
OBJECT_WITH_ACTS(0,4,4774,3,0,0,0,0x5000000, bhvHiddenRedCoinStar,63),
OBJECT_WITH_ACTS(122,1414,-5308,-531,0,0,0,0x4000000, bhvStar,63),
OBJECT_WITH_ACTS(122,1920,6512,1919,0,0,0,0x3000000, bhvStar,63),
OBJECT_WITH_ACTS(0,1687,-4577,-861,0,0,0,0x2000000, bhvHiddenStar,63),
OBJECT_WITH_ACTS(122,654,1604,1867,0,0,0,0x1000000, bhvStar,63),
OBJECT_WITH_ACTS(122,-977,-1130,-1678,0,0,0,0x0, bhvStar,63),
OBJECT_WITH_ACTS(137,1180,-4930,1470,0,225,0,0x0, bhvExclamationBox,112),
OBJECT_WITH_ACTS(0,-1080,-840,1573,0,0,0,0x560000, bhvPoleGrabbing,31),
OBJECT_WITH_ACTS(0,1417,-3822,-548,0,316,0,0xa0000, bhvSpinAirborneWarp,31),
        TERRAIN(/*terrainData*/ ttc_seg7_collision_level),
        SET_BACKGROUND_MUSIC(/*settingsPreset*/ 0x0001, /*seq*/ SEQ_LEVEL_SLIDE),
        TERRAIN_TYPE(/*terrainType*/ TERRAIN_STONE),
    END_AREA(),

    FREE_LEVEL_POOL(),
    MARIO_POS(/*area*/ 1, /*yaw*/ 316, /*pos*/ 1417, -4822, -548),
    CALL(/*arg*/ 0, /*func*/ lvl_init_or_update),
    CALL_LOOP(/*arg*/ 1, /*func*/ lvl_init_or_update),
    CLEAR_LEVEL(),
    SLEEP_BEFORE_EXIT(/*frames*/ 1),
    EXIT(),
};
